import{r as a,u as w,j as e,N as k,L as I}from"./index-xZsc_l3v.js";import{u as y,H as E}from"./Header-kg2XUOFg.js";import{F as R}from"./Footer--O4Qdsvr.js";const C=()=>{const{t}=y("global"),{isAuthenticated:p,updateAuthStatus:m}=w(),[o,j]=a.useState(""),[l,f]=a.useState(""),[c,b]=a.useState({}),[g,h]=a.useState(""),[u,i]=a.useState(!1),v=a.useRef(null),L=a.useRef(null),N=a.useCallback(n=>{n.preventDefault(),i(!0),h("");const r={},d=document.getElementById("email"),x=document.getElementById("password"),S=/^\S+@\S+\.\S+$/;o.trim()?S.test(o.trim())||(r.email="Invalid email format",d.classList.add("invalid"),i(!1)):(r.email="email is required",d.classList.add("invalid"),i(!1)),l.trim()||(r.password="Password is required",x.classList.add("invalid"),i(!1)),b(r),Object.keys(r).length===0&&fetch("http://localhost:3000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:l})}).then(s=>s.json()).then(s=>{s.token?(sessionStorage.setItem("token",s.token),sessionStorage.setItem("email",s.email),sessionStorage.setItem("username",s.username),sessionStorage.setItem("id",s.id),m(!0),i(!1)):s.message&&(h(s.message),i(!1),s.message.includes("email")?d.classList.add("backend-error"):x.classList.add("backend-error"))}).catch(s=>{console.error("Error al realizar la solicitud:",s),alert("Ha ocurrido un error al intentar iniciar sesiÃ³n."),i(!1)})},[o,l,m]);return p?e.jsx(k,{to:"/dashboard",replace:!0}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"header-container",children:e.jsx(E,{})}),e.jsxs("section",{className:"section-login",children:[e.jsx("img",{src:"/DecorationLines.svg",alt:"",className:"decoration-lines"}),e.jsx("img",{src:"/DecorationLinesR.svg",alt:"",className:"decoration-lines-r"}),e.jsxs("div",{className:"login-container",children:[e.jsx("h1",{children:t("login.title")}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("form",{children:[e.jsx("input",{type:"email",name:"email",id:"email",pattern:"\\S+@\\S+\\.\\S+",placeholder:t("login.emailPlaceholder"),onChange:n=>j(n.target.value),autoComplete:"on",required:!0}),c.email&&e.jsx("small",{className:"error",children:c.email}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"show-password",children:[e.jsx("input",{type:"password",placeholder:t("login.passwordPlaceholder"),maxLength:"30",minLength:"6",id:"password",onChange:n=>f(n.target.value),required:!0}),c.password&&l.trim().length>=0&&e.jsx("small",{className:"error",children:c.password}),g&&e.jsxs(e.Fragment,{children:[e.jsx("small",{className:"error",children:g}),emailInput.classList.add("invalid"),passwordInput.classList.add("invalid")]})]})]}),e.jsx("br",{}),e.jsxs("div",{className:"forgot-show-password",children:[e.jsx("a",{href:"",children:t("login.forgotPassword")}),e.jsxs("div",{className:"stay-logged-in",children:[e.jsx("h2",{children:t("login.stayLoggedIn")}),e.jsx("input",{type:"checkbox",className:"checkbox"})]})]}),e.jsx("button",{type:"submit",className:`sing-in-btn ${u?"loading":""}`,onClick:N,ref:v,children:u?e.jsx("img",{src:"BlueLoader.svg",alt:"",className:"login-loader loader-checked",ref:L}):t("login.signIn")}),e.jsxs("div",{className:"separation-line",children:[e.jsx("hr",{}),e.jsx("h6",{children:t("login.or")}),e.jsx("hr",{})]}),e.jsx(I,{to:"/create-account",className:"login-link-to-create-account",children:e.jsx("button",{className:"create-account-sign-in",children:t("login.createAccount")})})]})]}),e.jsx(R,{})]})},F=a.memo(C);export{F as default};
