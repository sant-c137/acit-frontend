import{r as s,j as e}from"./index-xZsc_l3v.js";import{H as y}from"./Header-kg2XUOFg.js";import{F as C}from"./Footer--O4Qdsvr.js";import{a as I}from"./axios-Cm0UX6qg.js";const P=()=>{s.useState("");const[r,g]=s.useState(""),[c,x]=s.useState(""),[i,h]=s.useState(""),[u,E]=s.useState(null),[j,d]=s.useState(null),[p,m]=s.useState(null),[f,l]=s.useState(!1),v=s.useRef(null),A=s.useRef(null),N=()=>{document.querySelector(".EditAccount-upload").click()},S=a=>{const t=a.target.files[0];if(E(t),t){const o=new FileReader;o.onload=()=>{d(o.result)},o.readAsDataURL(t)}else d(null)},w=async a=>{if(a.preventDefault(),l(!0),!r||!c||!i){m("Por favor, complete todos los campos"),l(!1);return}const t=new FormData,o=localStorage.getItem("id");if(t.append("id",o),t.append("username",r),t.append("email",c),t.append("password",i),u){const n=u.name.split("\\").pop().split("/").pop();t.append("profile_picture",u,n)}else t.append("profile_picture",null);try{const n=await I.post("http://localhost:3000/upload",t,{headers:{"Content-Type":"multipart/form-data"}});console.log("Usuario actualizado exitosamente:",n.data),l(!1)}catch(n){m("Error al actualizar el usuario"),console.error("Error al actualizar el usuario:",n),l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"Header-container",children:e.jsx(y,{})}),e.jsx("section",{className:"EditAccount-section",children:e.jsxs("form",{className:"EditAccount-form",children:[p&&e.jsx("p",{children:p}),e.jsx("img",{src:j,alt:"",className:"EditAccount-img"}),e.jsxs("div",{className:"EditAccount-imgContainer",children:[e.jsx("img",{src:"EditAccount.svg",alt:""}),e.jsx("span",{className:"Button",onClick:N,children:"Subir foto de perfil"}),e.jsx("input",{type:"file",name:"profile_picture",accept:"image/*",style:{display:"none"},className:"EditAccount-upload",onChange:S})]}),e.jsx("input",{className:"EditAccount-input",type:"text",placeholder:"Full name",name:"username",value:r,onChange:a=>g(a.target.value)}),e.jsx("input",{className:"EditAccount-input",type:"email",placeholder:"E-mail",name:"email",value:c,onChange:a=>x(a.target.value)}),e.jsx("input",{className:"EditAccount-input",type:"password",placeholder:"Password",name:"password",value:i,onChange:a=>h(a.target.value)}),e.jsx("button",{className:`EditAccount-button ${f?"Loading":""}`,onClick:w,ref:v,children:f?e.jsx("img",{src:"BlueLoader.svg",alt:"",className:"login-loader loader-checked",ref:A}):"Edit account"})]})}),e.jsx(C,{})]})};export{P as default};
